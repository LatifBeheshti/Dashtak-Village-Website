const data = {
  name: "ملک شجاع خان",
  children: [
    {
      name: "محمد وصال خان",
      children: [
        {
          name: "محمد غزال خان",
          children: [
            {
              name: "گلزار خان",
              children: [
                {
                  name: "لنگر خان",
                  children: [
                    {
                      name: "فتح محمد خان",
                      children: [
                        {
                          name: "عبدالاحمد خان",
                          children: [
                            {
                              name: "عبدالرزاق خان",
                            },
                            {
                              name: "عبدالجمیل لنگریان",
                              children: [
                                {
                                  name: "عبدالعزیز",
                                },
                                {
                                  name: "محمد احسان",
                                },
                              ],
                            },
                            {
                              name: "عبدالبصیر لنگریان",
                              children: [
                                {
                                  name: "احمد بلال",
                                },
                                {
                                  name: "احمد سهیل",
                                },
                              ],
                            },
                          ],
                        },
                        {
                          name: "عبدالروف خان",
                          children: [
                            {
                              name: "عبدالرحیم روفی",
                              children: [
                                { name: "احمد جاوید" },
                                {
                                  name: "محمد نذیر لنگریان",
                                  children: [
                                    { name: "احمد جاوید دشتی" },
                                    { name: "احمد شبیر دشتی" },
                                    { name: "احمد نصیر دشتی" },
                                  ],
                                },
                                {
                                  name: "احمد توفیق",
                                  children: [
                                    {
                                      name: "to be added",
                                    },
                                  ],
                                },
                              ],
                            },
                            { name: "عبدالرحمن" },
                            {
                              name: "محمدسرور",
                              children: [
                                {
                                  name: "هدایت الله روفی",
                                  children: [
                                    { name: "احمد عثمان دشتی" },
                                    { name: "حمزه دشتی" },
                                  ],
                                },
                                { name: "احمد شجاع دشتی" },
                              ],
                            },
                            {
                              name: "عبدالله روفی",
                              children: [{ name: "عبیدالله روفی" }],
                            },
                            {
                              name: "عبدالواحد روفی",
                              children: [
                                { name: "محمد عمر دشتی" },
                                { name: "سلیمان دشتی" },
                              ],
                            },
                            {
                              name: "عبدالقدیر روفی",
                              children: [
                                {
                                  name: "عبدالمتین روفی",
                                  children: [{ name: "محمد یوسف روفی" }],
                                },
                                {
                                  name: "عبدالمبین روفی",
                                  children: [{ name: "مصطفی روفی" }],
                                },
                              ],
                            },
                            {
                              name: "عبدالاحد بهشتی",
                              children: [
                                { name: "عبداللطیف بهشتی" },
                                {
                                  name: "عبدالحسیب بهشتی",
                                  children: [
                                    { name: "ادیب بهشتی" },
                                    { name: "انس بهشتی" },
                                  ],
                                },
                                { name: "عبدالعزیز بهشتی" },
                                {
                                  name: "عبدالباعث بهشتی",
                                  children: [{ name: "محمد یعقوب بهشتی" }],
                                },
                                { name: "احمد یاسر بهشتی" },
                              ],
                            },
                            { name: "ضیاالحق" },
                            {
                              name: "سراج‌الحق لنگریان",
                              children: [{ name: "ایمان لنگریان" }],
                            },
                          ],
                        },
                        {
                          name: "محمد اکرم خان",
                          children: [
                            {
                              name: "محمد قاسم",
                              children: [
                                {
                                  name: "محمد شعیب",
                                  children: [
                                    {
                                      name: "احمد شهیر دشتی",
                                      children: [{ name: "تیمور دشتی" }],
                                    },
                                    {
                                      name: "احمد منیر دشتی",
                                      children: [{ name: "مالک دشتی" }],
                                    },
                                  ],
                                },
                                {
                                  name: "احمد مختار",
                                  children: [{ name: "to be added" }],
                                },
                                {
                                  name: "احمد ضیا کچکنی",
                                  children: [{ name: "محمد الیاس" }],
                                },
                                {
                                  name: "محمد فهیم دشتی",
                                  children: [
                                    { name: "ادریس دشتی" },
                                    { name: "محمد یوسف" },
                                  ],
                                },
                              ],
                            },
                            {
                              name: "محمد اسلم",
                              children: [{ name: "میرویس اکرم" }],
                            },
                            { name: "احمد ضیا" },
                            {
                              name: "محمد شریف اکرمی",
                            },
                            { name: "محمد عارف" },
                            {
                              name: "محمد همایون",
                              children: [{ name: "زاهد" }],
                            },
                          ],
                        },
                        {
                          name: "عبدالغفور خان",
                          children: [
                            {
                              name: "عبدالستار",
                              children: [{ name: "مصطفی" }],
                            },
                            {
                              name: "عبدالصبور",
                              children: [
                                { name: "فردوس دشتی" },
                                { name: "فردین دشتی" },
                              ],
                            },
                            {
                              name: "عبدالشکور",
                              children: [
                                { name: "احمد فواد لنگریان" },
                                { name: "فرحت الله دشتی" },
                                { name: "عنایت الله دشتی" },
                                { name: "بهرام دشتی" },
                              ],
                            },
                          ],
                        },
                        {
                          name: "عبدالغفار خان",
                          children: [
                            { name: "عبدالصمد" },
                            {
                              name: "عبدالجبار",
                              children: [
                                {
                                  name: "عبدالحمید حقیق",
                                  children: [{ name: "to be added" }],
                                },
                                { name: "عبدالوحید سیرت" },
                              ],
                            },
                            {
                              name: "عبدالواسع",
                              children: [{ name: "صیام لنگریان" }],
                            },
                          ],
                        },
                        {
                          name: "محمد اکبر خان",
                          children: [
                            { name: "محمد اضغر" },
                            {
                              name: "محمد کبیر",
                              children: [{ name: "احمد منصور" }],
                            },
                          ],
                        },
                      ],
                    },

                    {
                      name: "شاه‌عالم خان",
                      children: [
                        {
                          name: "لعل آغا",
                          children: [
                            {
                              name: "احمد فرهاد",
                            },
                          ],
                        },
                      ],
                    },
                    {
                      name: "سکندر خان",
                      children: [
                        { name: "امان الله حسرت" },
                        { name: "حبیب الله" },
                        {
                          name: "محمد امین",
                          children: [
                            {
                              name: "احمد ارشاد",
                              children: [{ name: "ولید" }],
                            },
                            {
                              name: "احمد شاه",
                              children: [
                                { name: "جاوید سکندر" },
                                { name: "خالد" },
                              ],
                            },
                          ],
                        },
                        {
                          name: "محمد یونس",
                          children: [
                            { name: "محمد عمر" },
                            { name: "وحیدالله" },
                          ],
                        },
                      ],
                    },
                  ],
                },
                {
                  name: "خان پاچا خان",
                  children: [
                    {
                      name: "محمد یعقوب خان",
                      children: [
                        {
                          name: "محمد یوسف خان",
                          children: [
                            {
                              name: "حیات‌الله خان",
                              children: [{ name: "تمیم یوسفی" }],
                            },
                          ],
                        },
                        {
                          name: "محمد ایوب خان",
                          children: [
                            {
                              name: "محمد آصف",
                              children: [
                                { name: "دانش دشتی" },
                                { name: "مصطفی روان" },
                              ],
                            },
                            { name: "محمدعالم" },
                          ],
                        },
                        {
                          name: "عبدالکریم خان",
                          children: [
                            {
                              name: "خلیل الله",
                              children: [
                                { name: "صفی الله دستیار" },
                                { name: "مسیح الله دستیار" },
                              ],
                            },
                            { name: "عبدالمتین" },
                            {
                              name: "احمد مسعود",
                              children: [
                                { name: "مصطفی" },
                                { name: "نصیراحمد" },
                              ],
                            },
                            {
                              name: "احمدولید",
                              children: [{ name: "محمد خالد" }],
                            },
                          ],
                        },
                        {
                          name: "عبدالغیاث خان",
                          children: [
                            { name: "حمیدالله صبحرنگ" },
                            { name: "حشمت الله" },
                            { name: "فریدالله" },
                          ],
                        },
                        {
                          name: "محمد زمان خان",
                          children: [
                            {
                              name: "غلام فاروق صدیق",
                              children: [
                                { name: "محمد یوسف" },
                                { name: "محمد سلیمان" },
                                { name: "محمد اسماعیل" },
                              ],
                            },
                            {
                              name: "محمد فیاض",
                              children: [
                                { name: "طیب احمد" },
                                { name: "علی احمد" },
                                { name: "محمد جان" },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
      ],
    },
  ],
};
// SVG setup
const width = 1500; // Increased width for better spacing
const height = 8600; // Increased height for better spacing
const svg = d3
  .select("svg")
  .attr("width", width)
  .attr("height", height)
  .append("g")
  .attr("transform", "translate(50, -100)"); // Adjusted translation for better spacing

// Create a tree layout with explicit node separation
const tree = d3
  .tree()
  .size([height - 10, width - 200]) // Adjusted size for better spacing
  .separation((a, b) => (a.parent === b.parent ? 2 : 3)); // Increased separation between nodes

const root = d3.hierarchy(data);
tree(root);

const links = root.links();
const nodes = root.descendants();

// Draw straight connectors
svg
  .selectAll(".link")
  .data(links)
  .enter()
  .append("path")
  .attr("class", "link")
  .attr("d", (d) => {
    const source = { x: d.source.x, y: d.source.y };
    const target = { x: d.target.x, y: d.target.y };
    return `M${source.y},${source.x} L${target.y},${target.x}`; // Straight line
  })
  .attr("fill", "none")
  .attr("stroke", "#999")
  .attr("stroke-width", 1.5)
  .attr("stroke-dasharray", "none", (d, i) => (i % 2 === 0 ? "5,5" : "none"));

// Draw nodes with increased spacing
const node = svg
  .selectAll(".node")
  .data(nodes)
  .enter()
  .append("g")
  .attr("class", "node")
  .attr("transform", (d) => `translate(${d.y},${d.x})`);

node
  .append("rect")
  .attr("width", 120) // Fixed width for better readability
  .attr("height", 40) // Fixed height for better readability
  .attr("rx", 8)
  .attr("ry", 8)
  .attr("fill", "#6c757d")
  .attr("stroke", "#333")
  .attr("stroke-width", 0.5)
  .on("click", (event, d) => {
    window.location.href = "#"; // Replace with actual links if necessary
  });

node
  .append("text")
  .attr("dy", 25) // Adjusted vertical alignment to match the rectangle height
  .attr("x", 60) // Centered text within the rectangle
  .style("text-anchor", "middle") // Center text horizontally
  .style("fill", "white") // White text for better contrast
  .style("font-size", "12px") // Increased font size for better readability
  .text((d) => d.data.name);
document.addEventListener("DOMContentLoaded", function () {
  // Toggle navigation menu
  const navToggler = document.querySelector("[data-nav-toggler]");
  const navLinks = document.querySelectorAll("[data-nav-link]");
  const nav = document.querySelector("[data-navbar]");

  if (navToggler) {
    navToggler.addEventListener("click", function () {
      nav.classList.toggle("active");
    });
  }

  // Close menu on link click
  navLinks.forEach((link) => {
    link.addEventListener("click", () => {
      nav.classList.remove("active");
    });
  });

  // Search functionality
  const searchInput = document.getElementById("search-input");
  const searchIcon = document.getElementById("search-icon");

  if (searchInput && searchIcon) {
    searchIcon.addEventListener("click", function () {
      alert("جستجو برای: " + searchInput.value);
    });
  }

  // Contact form submission
  const contactForm = document.getElementById("contact-form");

  if (contactForm) {
    contactForm.addEventListener("submit", function (event) {
      event.preventDefault();
      alert("پیام شما ارسال شد!");
    });
  }
});

var scrollToTopBtn = document.getElementById("scrollToTopBtn");
var rootElement = document.documentElement;

scrollToTopBtn.addEventListener("click", scrollToTop);

function scrollToTop() {
  // Scroll to top logic
  rootElement.scrollTo({
    top: 0,
    behavior: "smooth",
  });
}
